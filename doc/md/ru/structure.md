# Структура каркаса

##Файловая структура

 * [assets](#assets)/
 * [automations](#automations)/
 * [config](#config)/
 * [controllers](#controllers)/
 * [doc](#doc)/
 * [lang](#lang)/
 * [lib](#lib)/
 * [models](#models)/
 * [publiс_html](#publiс_html)/
 * [styles](#styles)/
 * [templates](#templates)/
 * [tests](#tests)/
 * [vendor](#vendor)/
 * [views](#views)/

## assets

Здесь можно расположить настройки мета данных веб-страниц и списки подключаемых к ним файлов (*.js, *.css).
Формат содержимого будет зависеть от выбранного вами фреймворка.

## automations

Здесь располагаются все автоматизационные скрипты.

 * `init` - для инициализации приложения. Создаёт все необходимые конфигурационные файлы на основе файлов:
    - `config/description.php` - описание приложения
    - `config/templates.php` - шаблоны приложения

 * `update` - запускает обновление пакетных менеджеров ([NodeJS](https://nodejs.org/), [Bower](http://bower.io) и [Composer](https://getcomposer.org)).
Имеет несколько опций для запуска:

   | Опция     | Команда            | Описание                                                            |
   |-----------|--------------------|---------------------------------------------------------------------|
   | all       | `update all`       | Запускает обновление всех пакетных менеджеров                       |
   | node      | `update node`      | Запускает только [NodeJS](https://nodejs.org/)                      |
   | bower     | `update bower`     | Запускает только [Bower](http://bower.io)                           |
   | composer  | `update composer`  | Запускает только [Composer](https://getcomposer.org)                |
   | autoload  | `update autoload`  | Обновляет автозагрузчик классов [Composer](https://getcomposer.org) |
   | templates | `update templates` | Обновляет каталог шаблонов                                          |

 * `docs` - для автоматической генерации документации, которая производится на основе конфигурационных файлов,
    расположенных в каталоге [config](#config): 
    - doxygen.cfg - для [Doxygen](http://www.stack.nl/~dimitri/doxygen)
    - jsdoc-conf.json - для [JsDoc](http://usejsdoc.org)

 * `gentests` - для автоматического создания скелетов тестов. Настройки генератора находятся в файле:
   `config/tests.php`

 * `runtests` - для запуска автоматической проверки тестов.

 * `build` - для автоматической сборки приложения. Данный скрипт является "обёрткой" для запуска
    сборщика [gulpjs](http://gulpjs.com). Параметры сборки хрянатся в файле [gulpfile.js](../../../gulpfile.js).
   `build` ориентируется на параметр `PRODUCTION_MODE` (указываемый в конфигурационном файле: [config/main.php](../../../config/main.php))
   и в соответствии с этим запускает:
    - `gulp build` - для сборки `РАБОЧЕЙ` версии приложения (если установлен параметр `PRODUCTION_MODE`);
    - `gulp build-dev` - для сборки `ОТЛАДОЧНОЙ` версии приложения (если параметр `PRODUCTION_MODE` не установлен);

    Также возможен вариант запуска `build` с параметрами:

    - `build css` - для сборки только css-файлов;
    - `build js` - для сборки только javascript-файлов.

> Можно использовать `gulp` напрямую:
> - `gulp build`, `gulp build-css`, `gulp build-js` - для сборки `РАБОЧЕЙ` версии приложения
> - `gulp build-dev`, `gulp build-css-dev`, `gulp build-js-dev` - для сборки `ОТЛАДОЧНОЙ` версии приложения

 * `gettext` - для автоматического создания переводов при помощи утилиты [gettext](http://www.gnu.org/software/gettext/).
   `gettext` использует параметр `textDomains` (конфигурационного файла: [config/main.php](../../../config/main.php)) для 
   получения списка используемых в приложении текстовых доменов. Для каждого текстового домена создаётся свой `.po` файл во
   всех подкаталогах корнегого каталога `lang` (или любого другого указанного в параметре `root`). При этом исходные строки 
   для перевода будут автоматически вытянуты из всех файлов расположенных в каталогах, указанных в массиве `source`.

Т.е. если у вас следующая структура каталога `lang`:

~~~
 /lang
    /en
    /ru
~~~

   то команда 

~~~sh
$ ./gettext
~~~

создаст следующие файлы для домена `site`:

~~~
 /lang
    /en
        /LC_MESSAGES
            site.po
    /ru
        /LC_MESSAGES
            site.po
~~~

> Для компиляции `.mo` файлов из полученных `.po` файлов используйте
> ~~~sh
> $ ./gettext make
> ~~~

 

## config

Здесь располагаются все необходимые настройки приложения:

 - `description.php` - информация об имени, кратком описании и авторе приложения.
 - `templates.php`   - информация о расположении шаблонов приложения
 - `tests.php`       - информация о расположении тестов приложения
 - `main.php`        - информация необходимая для запуска приложения 

## controllers

Здесь можно расположить все контроллеры приложения.

## doc

Сюда складывается вся документация приложения.

Структура каталога следующая:

   - img/      - для картинок, используемых в оформлении документации
   - css/      - для файлов стилей, используемых в оформлении документации 
   - demos/    - для демонстрационных файлов
   - jsdoc/    - для сгенерированной документации по javascript файлам
   - phpdoc/   - для сгенерированной документации по php файлам
   - md/       - для файлов описания приложения в формате [Markdown](https://ru.wikipedia.org/wiki/Markdown)
       * en/   - для документации на английском языке
       * ru/   - для документации на русском языке

> Файл `doc/index.html` предназначен для создания навигации по документации приложения.

> Каталог `doc/demos` содержит файл `index.php` для создания навигации по демонстрационным файлам. 
> Просто добавьте свои демо-файлы в этот каталог и они сами появятся в меню `index.php`. Следует
> учитывать, что демо-файлы встраиваются в "тело" html кода `index.php`.


## lang

Здесь можно расположить переводы текстовых сообщений.

Структуру данного каталога рекомендуется выполнить в стиле утилиты [gettext](http://www.gnu.org/software/gettext/):

~~~
 /lang
    /en
        /LC_MESSAGES
    /ru
        /LC_MESSAGES
    ...
~~~

## lib

Здесь можно расположить все свои библиотеки.

## models

Здесь можно расположить все модели приложения.

## publiс_html

Это единственный каталог предназначеный для публичного доступа к вашему приложению. 
Он содержит стандартную структуру файлов:

   - css/       - для скомпилированных и сжатых файлов стилей в формате `css` 
   - fonts/     - для подключаемых шрифтов
   - js/        - для подключаемых файлов `javascript`
   - index.php  - стартовый файл 
   - .htaccess  - конфигурационный файл модуля [mod_rewrite](http://httpd.apache.org/docs/2.4/mod/mod_rewrite.html) сервера [Apache](http://httpd.apache.org),
настроенный на работу в режиме "одностраничного" веб приложения.

## styles

Здесь можно расположить файлы стилей в формате [sass](http://sass-lang.com) или [less](http://lesscss.org),
которые будут компилироваться в `css` файлы.

> По умолчанию здесь уже лежат sass-файлы фрейморка [Bootstrap](http://getbootstrap.com).

## templates

Здесь располагаются шаблоны из которых будет создаваться каркас приложения при запуске 
сценария автоматизации `automations/init`:

  - app/ - шаблоны файлов конфигураций приложения, пакетных менеджеров и документаторов
  - doxygen/ - шаблоны оформления [Doxygen](http://www.stack.nl/~dimitri/doxygen)
  - jsdoс/ - шаблоны оформления [JsDoc](http://usejsdoc.org)

> Сценарий `automations/init` создаёт только ещё не сущестующие в приложении файлы.

## tests

Здесь можно расположить все тесты приложения.

> Файл `tests/index.php` предназначен для отображения результатов тестов после запуска `automations/runtests`.

## vendor

Здесь располагаются все сторонние библиотеки.

> Предустановленная библиотека `digger\cradle` необходима для запуска скриптов автоматизации
> и первичной демонстрационной страницы.

## views

Здесь можно расположить все 'виды' и 'раскладки' приложения.
